name: 'Testing'

on:
  workflow_dispatch: # Manual trigger.

jobs:
  one:
    name: one
    runs-on: ubuntu-latest

    steps:
      - name: test
        run: |
          echo "test"

  two:
    name: two
    runs-on: ubuntu-latest

    steps:
      - name: echo
        run: |
          echo "test"
  fail:
    name: fail
    runs-on: ubuntu-latest

    steps:
      - name: fail
        run: exit 1

  notification:
    needs: [one, two, fail]
    if: always()
    name: Send Build Notification
    runs-on: ubuntu-latest

    steps:
      - name: Action Testing
        uses: zchryr/build-notifier-action@main
        with:
          body: 'Test'
          url: ${{ secrets.WEBHOOK_URL }}
          response_code: 201
      # - name: Webhook
      #   run: |
      #     curl --request POST '${{ secrets.WEBHOOK_URL }}' \
      #       --data "${{ toJSON(needs) }}" \
      #       --header "Source: GitHub Actions" \
      #       --header "Content-Type: application/json"
